### An overview of HTTP

#### Components of HTTP-based systems
    - Client: the user-agent
    - The Web server
    - Proxies

### Basic aspects of HTTP
    - HTTP is simple
    - HTTP is extensible
    - HTTP is stateless, but not sessionless
    - HTTP and connections






#### HTTP follows a classical client-server model, with a client opening a connection to make a request, then waiting until it receives a response from the server. HTTP is a stateless protocol, meaning that the server does not keep any session data between two requests, although the later addition of cookies adds state to some client-server interactions.

ЁЯФН ржмрж╛ржХрзНржпржЯрж╛ ржХрзА ржмрж▓рждрзЗржЫрзЗ?

HTTP follows a classical client-server model,
with a client opening a connection to make a request,
then waiting until it receives a response from the server.

ржорж╛ржирзЗ:
	тАв	HTTP-рждрзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ (browser, app, etc.) ржПржХржЯрж╛ connection ржЦрзБрж▓рзЗ тЖТ server ржП request ржкрж╛ржарж╛рзЯ (ржпрзЗржоржи: тАЬржПржЗ file ta daoтАЭ)
	тАв	рждрж╛рж░ржкрж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзЗ, ржпрждржХрзНрж╖ржг ржирж╛ server ржЙрждрзНрждрж░ ржжрзЗрзЯ (response ржкрж╛ржарж╛рзЯ)

HTTP is a stateless protocol,
meaning that the server does not keep any session data between two requests,

ржорж╛ржирзЗ:
	тАв	HTTP stateless тЖТ server ржХрзЛржирзЛ ржЖржЧрзЗрж░ request ржоржирзЗ рж░рж╛ржЦрзЗ ржирж╛
	тАв	рждрзБржорж┐ ржПржХржмрж╛рж░ request ржжрж┐рж▓рзЗ, server response ржжрж┐рзЯрзЗ ржнрзБрж▓рзЗ ржпрж╛ржмрзЗ
	тАв	ржкрж░рзЗрж░ржмрж╛рж░ ржЖрж░рзЗржХржЯрж╛ request ржжрж┐рж▓рзЗ тЖТ server ржЖржмрж╛рж░ ржирждрзБржиржнрж╛ржмрзЗ рж╢рзБрж░рзБ ржХрж░ржмрзЗ, ржЖржЧрзЗрж░ржЯрж╛ ржоржирзЗ ржирж╛ржЗ

although the later addition of cookies adds state to some client-server interactions.

ржорж╛ржирзЗ:
	тАв	ржкрж░рзЗ cookies ржЪрж╛рж▓рзБ рж╣рзЯ (browser ржП store рж╣рзЯ), ржпрзЗржЯрж╛ ржжрж┐рзЯрзЗ ржХрж┐ржЫрзБ state ржоржирзЗ рж░рж╛ржЦрж╛ ржпрж╛рзЯ
	тАв	ржпрзЗржоржи: login ржХрж░рзЗ ржлрзЗрж▓рж▓рзЗ cookie рждрзЗ token ржмрж╛ session ID рж░рзЗржЦрзЗ ржжрзЗржУрзЯрж╛ ржпрж╛рзЯ тЖТ ржпрж╛рждрзЗ ржкрж░рзЗрж░ржмрж╛рж░ server ржмрзБржЭрзЗ ржлрзЗрж▓рзЗ тАЬржПржЗ user ржЖржЧрзЗржЗ login ржХрж░ржЫрж┐рж▓рзЛтАЭ

т╕╗

ЁЯза ржЫрзЛржЯ ржПржХржЯрж╛ real-life analogy:

ЁЯФ╕ рждрзБржорж┐ ржПржХржЯрж╛ ржжрзЛржХрж╛ржирзЗ ржЧрзЗрж▓рзЗ ржмрж▓рж▓рж╛: тАЬржнрж╛ржЗ рзз ржХрзЗржЬрж┐ ржЪрж┐ржирж┐ ржжрзЗржитАЭ
ЁЯФ╕ ржжрзЛржХрж╛ржиржжрж╛рж░ ржЪрж┐ржирж┐ ржжрж┐рзЯрзЗ ржжрж┐рж▓рзЛ тАФ ржмрзНржпрж╕, рждрзЛржорж╛рж░ ржЖрж░ рждрж╛рж░ interaction рж╢рзЗрж╖ред
ЁЯФ╕ ржПрж░ржкрж░ рждрзБржорж┐ ржЖржмрж╛рж░ ржЧрзЗрж▓рзЗ: тАЬржнрж╛ржЗ рзз ржХрзЗржЬрж┐ ржЪрж╛рж▓ ржжрзЗржитАЭ тЖТ ржжрзЛржХрж╛ржиржжрж╛рж░ ржЪрж┐ржиржмрзЗ ржирж╛ рждрзБржорж┐ ржЖржЧрзЗржУ ржЖрж╕ржЫрж┐рж▓рзЗред

ржПржЗржЯрж╛ржЗ stateless behavior тАФ server ржЖржЧрзЗрж░ interaction ржоржирзЗ рж░рж╛ржЦрзЗ ржирж╛ред

рждржмрзЗ:
	тАв	ржпржжрж┐ рждрзБржорж┐ ржЧрж┐рзЯрзЗ тАЬржнрж╛ржЗ, ржЖржорж┐ ржЖржЧрзЗрж░ customer тАФ ржПржЗ ржЯрзЛржХрзЗржи ржжрзЗржЦрзЗржитАЭ ржмрж▓рзЛ (ржорж╛ржирзЗ cookie/token ржжрж╛ржУ),
	тАв	рждржЦржи ржжрзЛржХрж╛ржиржжрж╛рж░ ржЪрж┐ржирзЗ ржлрзЗрж▓рзЗ: тАЬржЖржЪрзНржЫрж╛ ржПржЗржЯрж╛ ржЖржЧрзЗрж░ login ржХрж░рж╛ userтАЭ

ржПржЗржЯрж╛ржЗ cookie ржжрж┐рзЯрзЗ stateful ржмрж╛ржирж╛ржирзЛред

т╕╗

тЬЕ рж╕ржВржХрзНрж╖рзЗржкрзЗ:

ржмрж┐рж╖рзЯ	ржорж╛ржирзЗ
Client-server model	Client request ржкрж╛ржарж╛рзЯ, Server response ржжрзЗрзЯ
Stateless protocol	Server ржЖржЧрзЗрж░ request ржоржирзЗ рж░рж╛ржЦрзЗ ржирж╛
Cookies	ржЖржЧрзЗрж░ session ржПрж░ info рж░рзЗржЦрзЗ ржжрзЗрзЯ client ржкрж╛рж╕рзЗ тЖТ ржкрж░рзЗ server ржЪрж┐ржирзЗ ржлрзЗрж▓рзЗ



тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР           Request         тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   Client   тФВ  тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтЦ╢  тФВ   Server   тФВ
тФВ (Browser)  тФВ                           тФВ (Node.js)  тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ   тЧАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФА  тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                    Response




### Protocol
A protocol is a system of rules that define how data is exchanged within or between computers. Communications between devices require that the devices agree on the format of the data that is being exchanged. The set of rules that defines a format is called a protocol.


### Proxy server
A proxy server is an intermediate program or computer used when navigating through different networks of the Internet. They facilitate access to content on the World Wide Web. A proxy intercepts requests and serves back responses; it may forward the requests, or not (for example in the case of a cache), and it may modify it (for example changing its headers, at the boundary between two networks).


### The Web server
On the opposite side of the communication channel is the server, which serves the document as requested by the client. A server appears as only a single machine virtually; but it may actually be a collection of servers sharing the load (load balancing), or other software (such as caches, a database server, or e-commerce servers), totally or partially generating the document on demand.


ЁЯУД ржорзВрж▓ рж▓рж╛ржЗржиржЯрж╛ ржХрзА ржмрж▓рждрзЗржЫрзЗ?

Server ржорж╛ржирзЗ ржХрзЗржмрж▓ ржПржХржЯрж╛ржЗ machine ржирж╛, ржмрж░ржВ ржЕржирзЗржХржЧрзБрж▓рзЛ ржЬрж┐ржирж┐рж╕ ржорж┐рж▓рж╛рзЯрж╛ ржХрж╛ржЬ ржХрж░рзЗ тАФ ржЖрж░ ржмрж╛ржЗрж░рзЗ ржерзЗржХрзЗ ржЖржорж░рж╛ рж╢рзБржзрзБ ржПржХржЯрж╛ржХрзЗржЗ ржжрзЗржЦрж┐!

т╕╗

ЁЯТб ржкрзЯрзЗржирзНржЯ ржмрж╛ржЗ ржкрзЯрзЗржирзНржЯ ржмрзНржпрж╛ржЦрзНржпрж╛:

т╕╗

1я╕ПтГг тАЬThe Web serverтАЭ ржорж╛ржирзЗ рж╢рзБржзрзБ ржПржХржЯрж╛ computer ржирж╛

ЁЯза ржЖржорж░рж╛ ржпржЦржи browser ржП request ржкрж╛ржарж╛ржЗ (https://example.com),
рждржЦржи тАЬserverтАЭ ржирж╛ржорзЗ ржпрж╛ржХрзЗ ржбрж╛ржХрж┐, рж╕рзЗржЯрж╛ ржЖрж╕рж▓рзЗ рж╣рзЯржд ржПржХржЯрж╛рж░ ржмржжрж▓рзЗ:
	тАв	ржПржХржЯрж╛ load balancer
	тАв	рзи-рзйржЯрж╛ backend server
	тАв	ржПржХрж╛ржзрж┐ржХ cache server
	тАв	image server
	тАв	database server
тЖТ рж╕ржм ржорж┐рж▓рж╛рзЯрж╛ ржПржХржЯрж╛ team ржПрж░ ржорждрзЛ ржХрж╛ржЬ ржХрж░рзЗред

рждржмрзБржУ ржмрж╛ржЗрж░рзЗ ржерзЗржХрзЗ ржЖржорж░рж╛ рж╢рзБржзрзБ ржмрж▓рж┐: тАЬserver ржерзЗржХрзЗ ржЖрж╕рждрзЗржЫрзЗтАЭ ЁЯШД

т╕╗

2я╕ПтГг Load Balancing:

Server ржЧрзБрж▓рж╛ ржЕржирзЗржХ request ржкрж╛рзЯред ржПржХржЯрж╛ server ржпржжрж┐ рж╕ржм ржХрж┐ржЫрзБрж░ ржнрж╛рж░ ржирзЗрзЯ, рждрж╛рж╣рж▓рзЗ crush ржХрж░рзЗ ржлрзЗрж▓ржмрзЗред

ЁЯФ╣ рждрж╛ржЗ Load balancer request ржЧрзБрж▓рж╛ ржнрж╛ржЧ ржХрж░рзЗ ржжрзЗрзЯ multiple server ржПрж░ ржорж╛ржЭрзЗред

ЁЯза ржЙржжрж╛рж╣рж░ржг:
	тАв	рждрзБржорж┐ ржврзБржХрж▓рзЗ тЖТ Server A handle ржХрж░рж▓
	тАв	ржЖржорж┐ ржврзБржХрж▓рзЗ тЖТ Server B handle ржХрж░рж▓
(ржЖржорж░рж╛ ржЬрж╛ржирж┐ржУ ржирж╛!)

т╕╗

3я╕ПтГг Caching & Dynamic Data:

рж╕ржм ржХрж┐ржЫрзБ live ржмрж╛ржирж┐рзЯрзЗ ржкрж╛ржарж╛рж▓рзЗ ржжрзЗрж░рж┐ рж╣рзЯ тАФ рждрж╛ржЗ ржХрж┐ржЫрзБ ржЬрж┐ржирж┐рж╕ тАЬржЖржЧрзЗржЗ рж░рзЗржбрж┐ ржХрж░рзЗтАЭ cache ржХрж░рзЗ рж░рж╛ржЦрж╛ рж╣рзЯ

ЁЯФ╣ Example:
	тАв	Static HTML / images тЖТ Cache ржерзЗржХрзЗ рждрж╛рзОржХрзНрж╖ржгрж┐ржХ ржкрж╛ржарж╛рзЯ
	тАв	Logged-in user ржПрж░ personalized dashboard тЖТ Backend generate ржХрж░рзЗ ржкрж╛ржарж╛рзЯ

т╕╗

4я╕ПтГг ржПржХржЗ machine ржП ржЕржирзЗржХ server run ржХрж░рждрзЗ ржкрж╛рж░рзЗ

ЁЯза ржПржХржЯрж╛ ржмрзЬ computer ржПрж░ ржнрж┐рждрж░рзЗ:
	тАв	Apache тЖТ example.com ржПрж░ ржЬржирзНржп
	тАв	Node.js тЖТ api.example.com ржПрж░ ржЬржирзНржп
	тАв	Nginx тЖТ static file serve ржХрж░рждрзЗ
тЖТ ржПрж░рж╛ ржПржХрж╕рж╛ржерзЗ ржХрж╛ржЬ ржХрж░рзЗред

т╕╗

5я╕ПтГг HTTP/1.1 + Host Header ржжрж┐рзЯрзЗ ржПржХржЯрж╛ржЗ IP рждрзЗ ржЕржирзЗржХ site ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛рзЯ

ЁЯФН ржзрж░рзЛ рждрзЛрж░ ржПржХржЯрж╛ shared hosting ржЖржЫрзЗ:
	тАв	example.com
	тАв	myblog.com
	тАв	rahimshop.com
тЖТ рж╕ржм ржПржХржЯрж╛ржЗ IP address ржЗржЙржЬ ржХрж░рзЗред

рждрж╛рж╣рж▓рзЗ ржЖрж▓рж╛ржжрж╛ ржХрж┐ржнрж╛ржмрзЗ ржЪрж┐ржирзЗ? ЁЯдФ

ЁЯФ╣ Host: header ржжрзЗржЦрзЗ!

Client ржпржЦржи request ржкрж╛ржарж╛рзЯ, header ржПрж░ ржнрж┐рждрж░ ржмрж▓рзЗ ржжрзЗрзЯ тАФ тАЬржЖржорж┐ example.com ржП ржврзБржХрждрзЗржЫрж┐!тАЭ

Server рж╕рзЗржЗ ржЕржирзБржпрж╛рзЯрзА ржЬрж╛ржирзЗ, ржХрзЛржиржЯрж╛ serve ржХрж░рждрзЗ рж╣ржмрзЗред

т╕╗

тЬЕ Bottom Line:

ржХржерж╛	ржмрзНржпрж╛ржЦрзНржпрж╛
Server = ржПржХржЯрж╛ржЗ ржирж╛	ржнрзЗрждрж░рзЗ ржЕржирзЗржХ service/software ржЪрж╛рж▓рж╛рзЯ
Load balance рж╣рзЯ	ржПржХрж╛ржзрж┐ржХ machine ржП ржнрж╛ржЧ рж╣рзЯ
Cache & DB ржпрзБржХрзНржд	Real-time ржУ pre-loaded content mix
ржПржХржЗ IP рждрзЗ ржЕржирзЗржХ site	HTTP/1.1 + Host header magic



т╕╗

ЁЯМР HTTP Flow (Client тЖТ Server)

ЁЯЫа Step 1: TCP Connection ржЦрзЛрж▓рзЛ

HTTP ржПржХржЯрж╛ Application Layer protocol тАФ ржПрж░ ржирж┐ржЪрзЗ TCP ржХрж╛ржЬ ржХрж░рзЗред

ЁЯУж Client ржпржЦржи ржХрзЛржирзЛ webpage ржЪрж╛ржЗ (e.g., GET /), рждржЦржи:
	1.	ржкрзНрж░ржержорзЗ ржПржХржЯрж╛ TCP connection ржЦрзБрж▓рзЗ
	2.	ржПрж░ржкрж░ ржУржЗ connection ржжрж┐рзЯрзЗ HTTP message ржкрж╛ржарж╛рзЯ

ЁЯТб ржПржЗ TCP connection:
	тАв	ржирждрзБржи рж╣рждрзЗ ржкрж╛рж░рзЗ
	тАв	ржЖржЧрзЗрж░ржЯрж╛ reuse рж╣рждрзЗ ржкрж╛рж░рзЗ
	тАв	ржЕржержмрж╛ ржПржХрж╛ржзрж┐ржХ connection ржПржХрж╕рж╛ржерзЗ ржЦрзЛрж▓рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ (high performance ржПрж░ ржЬржирзНржп)

т╕╗

ЁЯУй Step 2: HTTP Request ржкрж╛ржарж╛рзЯ

HTTP/1.1 ржП ржПржЯрж╛ human-readable рж╣рзЯ, ржпрзЗржоржи:

GET / HTTP/1.1
Host: developer.mozilla.org
Accept-Language: fr

ЁЯФ╣ ржПржЯрж╛ ржмрзЛржЭрж╛рзЯ:
тАЬHi server, ржЖржорж┐ ржПржЗ ржкрзЗржЗржЬржЯрж╛ ржЪрж╛ржЗ, ржЖрж░ ржЖржорж┐ French language prefer ржХрж░рж┐!тАЭ

т╕╗

ЁЯУм Step 3: Server ржерзЗржХрзЗ HTTP Response ржЖрж╕рзЗ

Server reply ржжрзЗрзЯ:

HTTP/1.1 200 OK
Date: Sat, 09 Oct 2010 14:28:02 GMT
Server: Apache
Content-Length: 29769
Content-Type: text/html

ЁЯза ржПрж░ ржкрж░рзЗ ржпрзЗржЯрж╛ ржЖрж╕рзЗ тАФ ржУржЯрж╛ржЗ ржЖрж╕рж▓рзЗ HTML page content (<!doctype html>...</html>)

т╕╗

ЁЯФД Step 4: Connection ржмржирзНржз ржмрж╛ Reuse

Client decide ржХрж░рзЗ:
	тАв	ржПржЗ TCP connection ржмржирзНржз ржХрж░ржмрзЗ?
	тАв	ржирж╛ рж╣рж▓рзЗ, ржПржХржЗ connection ржжрж┐рзЯрзЗ ржЖрж░рзЗржХржЯрж╛ request ржкрж╛ржарж╛ржмрзЗ?

ЁЯФ╣ Modern browsers тЖТ connection reuse ржХрж░рзЗ efficiency ржмрж╛рзЬрж╛рзЯ (persistent connections)

т╕╗

тЪбя╕П HTTP Pipelining ржХрж┐?

ржПржЯрж╛ ржПржХржЯрж╛ ржкрзБрж░рзЛржирзЛ technique, ржпрзЗржЯрж╛ HTTP/1.1 ржП introduce рж╣рзЯ

ЁЯФ╣ ржзрж╛рж░ржгрж╛ ржЫрж┐рж▓:
	тАв	ржПржХрж╛ржзрж┐ржХ HTTP request ржПржХрж╕рж╛ржерзЗ ржкрж╛ржарж╛ржирзЛ ржпрж╛ржмрзЗ
	тАв	response ржЧрзБрж▓рж╛ ржЖрж╕ржмрзЗ ordered ржнрж╛ржмрзЗ

ЁЯОп Goal ржЫрж┐рж▓: Faster communication, ржХржо latency

тЭМ ржХрж┐ржирзНрждрзБ ржмрж╛рж╕рзНрждржмрзЗ ржЕржирзЗржХ network ржбрж┐ржнрж╛ржЗрж╕ / server / proxy ржарж┐ржХржорждрзЛ handle ржХрж░рждрзЗ ржкрж╛рж░ржд ржирж╛

т╕╗

ЁЯЪА HTTP/2: Multiplexing ржжрж┐рзЯрзЗ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржи

ЁЯФ╣ HTTP/2 ржП ржПржХржЯрж╛ржЗ TCP connection ржПрж░ ржоржзрзНржпрзЗ ржПржХрж╛ржзрж┐ржХ request-response ржПржХрж╕рж╛ржерзЗ ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛рзЯред

ЁЯОм рж╕ржм ржХрж┐ржЫрзБ frame ржЖржХрж╛рж░рзЗ ржпрж╛рзЯ
ЁЯОн ржкрзНрж░рждрж┐ржЯрж╛ request ржЖрж▓рж╛ржжрж╛ stream ржП тАФ рждрж╛ржЗ тАЬржПржХржЯрж╛рж░ ржЬржирзНржп ржЖрж░рзЗржХржЯрж╛ wait ржХрж░рзЗ ржирж╛тАЭ

ЁЯСЙ Faster, smarter, and more compatible with modern web!

т╕╗

тЬЕ Summary Table

Step	What Happens
1я╕ПтГг	TCP connection ржЦрзЛрж▓рж╛ рж╣рзЯ
2я╕ПтГг	Client HTTP Request ржкрж╛ржарж╛рзЯ
3я╕ПтГг	Server Response ржжрзЗрзЯ (header + body)
4я╕ПтГг	Connection ржмржирзНржз ржмрж╛ reuse рж╣рзЯ
тЪая╕П	HTTP pipelining ржкрзБрж░рзЛржирзЛ тАФ HTTP/2 ржП multiplexing ржмрзЗрж╢рж┐ efficient



т╕╗

### APIs based on HTTP

